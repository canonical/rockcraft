.. _release-1.7.0:
.. _release-1.7:

Rockcraft 1.7 release notes
===========================

20 December 2024

Learn about the new features, changes, and fixes introduced in Rockcraft 1.7.
For information about the Rockcraft release cycle, see the
:ref:`release_policy_and_schedule`.


Requirements and compatibility
------------------------------

To run Rockcraft, a system requires the following minimum hardware and
installed software. These requirements apply to local hosts as well as VMs and
container hosts.


Minimum hardware requirements
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

- AMD64, ARM64, ARMv7-M, RISC-V 64-bit, PowerPC 64-bit little-endian, or S390x
  processor
- 2GB RAM
- 10GB available storage space
- Internet access for remote software sources and the Snap Store


Platform requirements
~~~~~~~~~~~~~~~~~~~~~

.. list-table::
  :header-rows: 1
  :widths: 1 3 3

  * - Platform
    - Version
    - Software requirements
  * - GNU/Linux
    - Popular distributions that ship with systemd and are `compatible with
      snapd <https://snapcraft.io/docs/installing-snapd>`_
    - systemd


What's new
----------

Rockcraft 1.7 brings the following features, integrations, and improvements.


Support for remote builds
~~~~~~~~~~~~~~~~~~~~~~~~~

We added support for remote builds, which leverage off-site compute for
building rocks and can build for multiple architectures with a single command.
For a description of the feature, see :ref:`reference-remote-builds`, or run
``rockcraft remote-build --help``.

This feature is new and experimental -- we welcome feedback on the
`Ubuntu Discourse`_ forum.

Minor features
--------------

Rockcraft 1.7 brings the following minor changes.


``init`` command
~~~~~~~~~~~~~~~~

The default base of the project file generated by ``rockcraft init`` has been
updated from ``ubuntu@22.04`` to ``ubuntu@24.04``.


Rockcraft snap
~~~~~~~~~~~~~~

The base of the Rockcraft snap was updated from core22 to core24.


Go extension
~~~~~~~~~~~~

A new :ref:`tutorial <tutorial-build-a-rock-for-a-go-app>` and :ref:`reference
<reference-go-framework>` are available for the go-framework extension.


OCI image configuration
~~~~~~~~~~~~~~~~~~~~~~~

When using ``run-user: _daemon_``, the value of the ``Config.User`` key in the
generated rock has been updated from the user name (``_daemon_``) to its
numeric ID.


12-factor app extensions
~~~~~~~~~~~~~~~~~~~~~~~~

We added support for Gunicorn async workers on the Django and Flask extensions.


12-factor app documentation
~~~~~~~~~~~~~~~~~~~~~~~~~~~

The documentation for the various 12-factor framework extensions has been
updated for clarity and to better conform with documentation best practices.


Maven and Ant plugins
~~~~~~~~~~~~~~~~~~~~~

We changed the location of the Java runtime executable on rocks built using the
the Maven and Ant plugins from ``/bin/java`` to ``/usr/bin/java``, as the
former conflicts with the user-merged Ubuntu base.

Fixed bugs and issues
---------------------

The following issues have been resolved in Rockcraft 1.7:

- `#659`_ Kubernetes ``runAsNonRoot`` incompatibility with
  ``run-user: _daemon_``.
- `#749`_ Trying to build the output of "expand-extensions" fails because of the
  pebble part.


Contributors
------------

We would like to express a big thank you to all the people who contributed to
this release.

:literalref:`@alithethird <https://github.com/alithethird>`,
:literalref:`@dariuszd21 <https://github.com/dariuszd21>`,
:literalref:`@erinecon <https://github.com/erinecon>`,
:literalref:`@javierdelapuente <https://github.com/javierdelapuente>`,
:literalref:`@lengau <https://github.com/lengau>`,
:literalref:`@linostar <https://github.com/linostar>`,
:literalref:`@tigarmo <https://github.com/tigarmo>`,
:literalref:`@vpa1977 <https://github.com/vpa1977>`
and :literalref:`@yanksyoon <https://github.com/yanksyoon>`.

.. _Ubuntu Discourse: https://discourse.ubuntu.com/c/project/rockcraft/118

.. _#659: https://github.com/canonical/rockcraft/issues/659
.. _#749: https://github.com/canonical/rockcraft/issues/659
