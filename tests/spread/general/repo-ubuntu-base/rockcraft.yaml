name: apt-repo-test
version: latest
summary: A ROCK that pulls in a package from an external PPA
description: A ROCK that pulls in a package from an external PPA
license: Apache-2.0
base: ubuntu:22.04
entrypoint: [/usr/bin/python3.12]
cmd: [-c, "import sys;print(sys.version)"]
platforms:
  amd64:

package-repositories:
  - type: apt
    ppa: deadsnakes/ppa
    priority: always
  - type: apt
    cloud: antelope
    pocket: proposed
    priority: 999

parts:
  hello:
    plugin: nil
    override-build: |
      apt-cache policy keystone
      apt-cache policy keystone | grep -F "999 http://ubuntu-cloud.archive.canonical.com/ubuntu jammy-proposed/antelope/main amd64 Packages"
    stage-packages:
      - python3.12
      - keystone
